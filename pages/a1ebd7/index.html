<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vuex状态管理 | comelong blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/boke/img/hero.jpg">
    <meta name="description" content="cometang前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,php,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="comelong个人博客,马金龙个人博客，前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/boke/assets/css/0.styles.dd81ba30.css" as="style"><link rel="preload" href="/boke/assets/js/app.070e90f1.js" as="script"><link rel="preload" href="/boke/assets/js/2.befd470a.js" as="script"><link rel="preload" href="/boke/assets/js/24.4112a5f9.js" as="script"><link rel="prefetch" href="/boke/assets/js/10.9681d876.js"><link rel="prefetch" href="/boke/assets/js/11.2c5ee6d1.js"><link rel="prefetch" href="/boke/assets/js/12.bcc31f0a.js"><link rel="prefetch" href="/boke/assets/js/13.b9e50dd9.js"><link rel="prefetch" href="/boke/assets/js/14.1ded8bb9.js"><link rel="prefetch" href="/boke/assets/js/15.b7576ccb.js"><link rel="prefetch" href="/boke/assets/js/16.d2ba0c35.js"><link rel="prefetch" href="/boke/assets/js/17.3660487a.js"><link rel="prefetch" href="/boke/assets/js/18.11020baa.js"><link rel="prefetch" href="/boke/assets/js/19.825574d1.js"><link rel="prefetch" href="/boke/assets/js/20.4cdc955d.js"><link rel="prefetch" href="/boke/assets/js/21.b80ed067.js"><link rel="prefetch" href="/boke/assets/js/22.e575f001.js"><link rel="prefetch" href="/boke/assets/js/23.8dafacfd.js"><link rel="prefetch" href="/boke/assets/js/25.cf763bf8.js"><link rel="prefetch" href="/boke/assets/js/26.52204d7d.js"><link rel="prefetch" href="/boke/assets/js/27.b1767dd0.js"><link rel="prefetch" href="/boke/assets/js/28.9849700b.js"><link rel="prefetch" href="/boke/assets/js/29.99758ebc.js"><link rel="prefetch" href="/boke/assets/js/3.20039c9b.js"><link rel="prefetch" href="/boke/assets/js/30.55de5506.js"><link rel="prefetch" href="/boke/assets/js/31.c1452acf.js"><link rel="prefetch" href="/boke/assets/js/32.7ebf539a.js"><link rel="prefetch" href="/boke/assets/js/33.c0378cad.js"><link rel="prefetch" href="/boke/assets/js/34.095e233e.js"><link rel="prefetch" href="/boke/assets/js/35.413a58f8.js"><link rel="prefetch" href="/boke/assets/js/36.c57dfc61.js"><link rel="prefetch" href="/boke/assets/js/37.b01587c7.js"><link rel="prefetch" href="/boke/assets/js/38.84f8cd6e.js"><link rel="prefetch" href="/boke/assets/js/39.157e251b.js"><link rel="prefetch" href="/boke/assets/js/4.7b0dc363.js"><link rel="prefetch" href="/boke/assets/js/40.77ea6acf.js"><link rel="prefetch" href="/boke/assets/js/41.62d2f2da.js"><link rel="prefetch" href="/boke/assets/js/42.c72eada7.js"><link rel="prefetch" href="/boke/assets/js/43.00c08c16.js"><link rel="prefetch" href="/boke/assets/js/44.a02f252d.js"><link rel="prefetch" href="/boke/assets/js/45.40ca8025.js"><link rel="prefetch" href="/boke/assets/js/46.1e9736cb.js"><link rel="prefetch" href="/boke/assets/js/47.dc98781a.js"><link rel="prefetch" href="/boke/assets/js/48.7607ea07.js"><link rel="prefetch" href="/boke/assets/js/49.0b145caf.js"><link rel="prefetch" href="/boke/assets/js/5.0c2f87c6.js"><link rel="prefetch" href="/boke/assets/js/50.62de6b38.js"><link rel="prefetch" href="/boke/assets/js/51.ddaa0685.js"><link rel="prefetch" href="/boke/assets/js/52.009318fc.js"><link rel="prefetch" href="/boke/assets/js/53.1272d1d6.js"><link rel="prefetch" href="/boke/assets/js/54.5f1f17c9.js"><link rel="prefetch" href="/boke/assets/js/55.9c470640.js"><link rel="prefetch" href="/boke/assets/js/56.89c1ca6a.js"><link rel="prefetch" href="/boke/assets/js/57.4ec86f13.js"><link rel="prefetch" href="/boke/assets/js/58.9f98e28c.js"><link rel="prefetch" href="/boke/assets/js/59.fbffa818.js"><link rel="prefetch" href="/boke/assets/js/6.70b1ad98.js"><link rel="prefetch" href="/boke/assets/js/60.d968c7d0.js"><link rel="prefetch" href="/boke/assets/js/61.54711ab8.js"><link rel="prefetch" href="/boke/assets/js/62.ddc89b22.js"><link rel="prefetch" href="/boke/assets/js/63.9da3f06f.js"><link rel="prefetch" href="/boke/assets/js/64.bda97384.js"><link rel="prefetch" href="/boke/assets/js/65.adfd07b6.js"><link rel="prefetch" href="/boke/assets/js/66.8f2bf182.js"><link rel="prefetch" href="/boke/assets/js/67.146a8c9b.js"><link rel="prefetch" href="/boke/assets/js/68.13dbb670.js"><link rel="prefetch" href="/boke/assets/js/69.6cb89c2e.js"><link rel="prefetch" href="/boke/assets/js/7.cb847667.js"><link rel="prefetch" href="/boke/assets/js/70.f30b5e88.js"><link rel="prefetch" href="/boke/assets/js/71.14b7f9b6.js"><link rel="prefetch" href="/boke/assets/js/72.d5ba59e2.js"><link rel="prefetch" href="/boke/assets/js/73.d4f5905c.js"><link rel="prefetch" href="/boke/assets/js/74.309b62f0.js"><link rel="prefetch" href="/boke/assets/js/75.c7817ad1.js"><link rel="prefetch" href="/boke/assets/js/76.24e30f40.js"><link rel="prefetch" href="/boke/assets/js/77.c9a694c6.js"><link rel="prefetch" href="/boke/assets/js/78.45d9a413.js"><link rel="prefetch" href="/boke/assets/js/79.020a435c.js"><link rel="prefetch" href="/boke/assets/js/8.c4232b1b.js"><link rel="prefetch" href="/boke/assets/js/80.0420d6a6.js"><link rel="prefetch" href="/boke/assets/js/81.fe41b523.js"><link rel="prefetch" href="/boke/assets/js/82.f6a8f031.js"><link rel="prefetch" href="/boke/assets/js/83.b90646f4.js"><link rel="prefetch" href="/boke/assets/js/84.2ce25d6c.js"><link rel="prefetch" href="/boke/assets/js/85.d7064df1.js"><link rel="prefetch" href="/boke/assets/js/86.fa13bb3c.js"><link rel="prefetch" href="/boke/assets/js/87.02fd86a9.js"><link rel="prefetch" href="/boke/assets/js/88.68cbfded.js"><link rel="prefetch" href="/boke/assets/js/89.faffe20a.js"><link rel="prefetch" href="/boke/assets/js/9.977ccbe2.js"><link rel="prefetch" href="/boke/assets/js/90.d64e309c.js"><link rel="prefetch" href="/boke/assets/js/91.c52c3b3e.js"><link rel="prefetch" href="/boke/assets/js/92.c6c56a31.js"><link rel="prefetch" href="/boke/assets/js/93.6bafb2b7.js"><link rel="prefetch" href="/boke/assets/js/94.c429bddf.js"><link rel="prefetch" href="/boke/assets/js/95.7019883a.js"><link rel="prefetch" href="/boke/assets/js/96.3d5832fa.js">
    <link rel="stylesheet" href="/boke/assets/css/0.styles.dd81ba30.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/boke/" class="home-link router-link-active"><img src="/boke/img/hero.jpg" alt="comelong blog" class="logo"> <span class="site-name can-hide">comelong blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/boke/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/boke/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/712869/" class="nav-link">html5</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/b349c2/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/712848/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/658702/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/5d463fbdb172d43b/" class="nav-link">react</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/boke/back/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/fbb16b/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/0a83b083bdf257cb/" class="nav-link">PHP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/boke/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/boke/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/boke/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/boke/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统-网络-浏览器" class="dropdown-title"><a href="/boke/browser/" class="link-title">操作系统-网络-浏览器</a> <span class="title" style="display:none;">操作系统-网络-浏览器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/530c2b/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/55b8a4/" class="nav-link">浏览器</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/77d83b/" class="nav-link">操作系统</a></li></ul></div></div><div class="nav-item"><a href="/boke/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/boke/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/boke/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/boke/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/mjlxiaoma" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/hero.jpg"> <div class="blogger-info"><h3>comelong</h3> <span>永远相信技术的力量</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/boke/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/boke/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/712869/" class="nav-link">html5</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/b349c2/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/712848/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/658702/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/5d463fbdb172d43b/" class="nav-link">react</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/boke/back/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/fbb16b/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/0a83b083bdf257cb/" class="nav-link">PHP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/boke/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/boke/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/boke/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/boke/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统-网络-浏览器" class="dropdown-title"><a href="/boke/browser/" class="link-title">操作系统-网络-浏览器</a> <span class="title" style="display:none;">操作系统-网络-浏览器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/pages/530c2b/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/55b8a4/" class="nav-link">浏览器</a></li><li class="dropdown-item"><!----> <a href="/boke/pages/77d83b/" class="nav-link">操作系统</a></li></ul></div></div><div class="nav-item"><a href="/boke/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/boke/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/boke/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/boke/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/boke/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/mjlxiaoma" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/boke/pages/658702/" class="sidebar-link">vue基础详解</a></li><li><a href="/boke/pages/1be917/" class="sidebar-link">vue组件与路由</a></li><li><a href="/boke/pages/65b614/" class="sidebar-link">组件通信与插槽</a></li><li><a href="/boke/pages/e0fc4a/" class="sidebar-link">MVC与MVVM</a></li><li><a href="/boke/pages/a1ebd7/" aria-current="page" class="active sidebar-link">vuex状态管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_1-前言" class="sidebar-link">1.前言</a></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_2-vue-组件传值回顾" class="sidebar-link">2.vue 组件传值回顾</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/boke/pages/a1ebd7/#_2-1-父传子-动态属性-props" class="sidebar-link">2.1 父传子  动态属性+props</a></li><li class="sidebar-sub-header level3"><a href="/boke/pages/a1ebd7/#_2-2-子传父-emit-自定义事件" class="sidebar-link">2.2 子传父   $emit+自定义事件</a></li><li class="sidebar-sub-header level3"><a href="/boke/pages/a1ebd7/#_2-3-中央事件总线-bus-eventbus" class="sidebar-link">2.3 中央事件总线 $bus   eventBus</a></li><li class="sidebar-sub-header level3"><a href="/boke/pages/a1ebd7/#_2-4-祖宗孙子传值-provide-inject" class="sidebar-link">2.4 祖宗孙子传值:   provide+ inject</a></li><li class="sidebar-sub-header level3"><a href="/boke/pages/a1ebd7/#_2-5-中间商-父亲组件带动态属性-attrs-listeners" class="sidebar-link">2.5 中间商：父亲组件带动态属性  $attrs  $listeners</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_3-vuex-状态管理仓库" class="sidebar-link">3.Vuex 状态管理仓库</a></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_4-获取-state-中的数据" class="sidebar-link">4 获取 state 中的数据</a></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_5-mutations-修改数据的方法" class="sidebar-link">5.mutations 修改数据的方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/boke/pages/a1ebd7/#_5-1-在组件中直接修改值" class="sidebar-link">5.1 在组件中直接修改值</a></li><li class="sidebar-sub-header level3"><a href="/boke/pages/a1ebd7/#_5-2-定义mutations的方法-用来修改数据" class="sidebar-link">5.2 定义mutations的方法 用来修改数据</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_6-actions-异步修改数据" class="sidebar-link">6. actions 异步修改数据</a></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_7-修饰器-getters" class="sidebar-link">7.修饰器：Getters</a></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_8-模块-module" class="sidebar-link">8. 模块  Module</a></li><li class="sidebar-sub-header level2"><a href="/boke/pages/a1ebd7/#_9-vuex-数据持久化-插件" class="sidebar-link">9.Vuex 数据持久化 插件</a></li></ul></li><li><a href="/boke/pages/bfabcd/" class="sidebar-link">TypeScript基础</a></li><li><a href="/boke/pages/4d33dc/" class="sidebar-link">vue进阶</a></li><li><a href="/boke/pages/377430/" class="sidebar-link">Vue3新特性(持续更新)</a></li><li><a href="/boke/pages/3b485a/" class="sidebar-link">Vue修饰符</a></li><li><a href="/boke/pages/597471/" class="sidebar-link">VueRoute钩子函数</a></li><li><a href="/boke/pages/baf661/" class="sidebar-link">history与hash</a></li><li><a href="/boke/pages/03a416/" class="sidebar-link">vue中文件导入&amp;导出</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>h5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js查漏补缺</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>uniapp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>组件封装</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/boke/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/boke/web/#前端" data-v-06225672>前端</a></li><li data-v-06225672><a href="/boke/web/#vue" data-v-06225672>vue</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/mjlxiaoma" target="_blank" title="作者" class="beLink" data-v-06225672>comelong</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-06-04</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">vuex状态管理<!----></h1>  <div class="theme-vdoing-content content__default"><div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>cn<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">6928468842377117709</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_1-前言"><a href="#_1-前言" class="header-anchor">#</a> 1.前言</h2> <blockquote><p>官网地址：https://vuex.vuejs.org/zh/</p></blockquote> <blockquote><p>官网介绍：Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式 + 库</strong>。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p></blockquote> <p><strong>作用： 将整个系统中所有的状态（需要跨页面 跨组件传值的变量）都存储到vuex仓库中，实现任意组件都可以对该数据进行存取操作。</strong></p> <h2 id="_2-vue-组件传值回顾"><a href="#_2-vue-组件传值回顾" class="header-anchor">#</a> 2.vue 组件传值回顾</h2> <ul><li>父传子  动态属性+props</li> <li>子传父  $emit+自定义事件</li> <li>中央事件总线   <code>Vue.prototype.$bus=new Vue()</code> +$emit+$on</li> <li>祖宗孙子传值:   provide+ inject</li></ul> <h3 id="_2-1-父传子-动态属性-props"><a href="#_2-1-父传子-动态属性-props" class="header-anchor">#</a> 2.1 父传子  动态属性+props</h3> <p>父组件</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>子组件名</span>  <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>你好啊<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">:age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>子组件名</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>子组件</p> <blockquote><p>通过props 接收后， 直接用 <code>this.变量</code>使用</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span>String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span><span class="token string">'标题'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span>Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>   
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-2-子传父-emit-自定义事件"><a href="#_2-2-子传父-emit-自定义事件" class="header-anchor">#</a> 2.2 子传父   $emit+自定义事件</h3> <p>父组件</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>子组件名</span> <span class="token attr-name">@自定义事件类型名</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>执行函数<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>子组件名</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">执行函数</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//data 就是 子组件传递给父组件的数据</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>子组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'自定义事件类型名'</span><span class="token punctuation">,</span>传递的数据<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-3-中央事件总线-bus-eventbus"><a href="#_2-3-中央事件总线-bus-eventbus" class="header-anchor">#</a> 2.3 中央事件总线 $bus   eventBus</h3> <blockquote><p>在同一个页面组件中 的所有子组件可以任意传递数据</p></blockquote> <p>main.js  全局挂载 一个新的vue实例对象作为 中央</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>发送数据的组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//发送数据</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'自定义事件类型'</span><span class="token punctuation">,</span>发送的数据<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>接收数据的组件</p> <blockquote><p>接收数据的组件可以在created 生命周期中 监听该自定义事件，如果被触发就可以拿到数据</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'自定义事件类型'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//data 就是 拿到的数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-4-祖宗孙子传值-provide-inject"><a href="#_2-4-祖宗孙子传值-provide-inject" class="header-anchor">#</a> 2.4 祖宗孙子传值:   provide+ inject</h3> <blockquote><p>优：祖宗节点定义好数据，所有的孙子组件 都可以使用该数据 非常方便</p> <p>缺：只能传递一个 固定值下去，没有响应式（子组件修改了该数据，祖宗节点的数据并不会发生变化）</p></blockquote> <p>祖宗组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">//   祖宗注入依赖</span>
  <span class="token literal-property property">provide</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'你好呀'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">//   祖宗注入依赖</span>
  <span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;你好呀&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>孙子组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//可以获取和使用</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//不能修改---报错</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'我是孙子组件'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-5-中间商-父亲组件带动态属性-attrs-listeners"><a href="#_2-5-中间商-父亲组件带动态属性-attrs-listeners" class="header-anchor">#</a> 2.5 中间商：父亲组件带动态属性  $attrs  $listeners</h3> <blockquote><p>通过属性传值：可以快速实现 祖宗==&gt;孙子   孙子==&gt;祖宗【父亲组件只是一个中间商 负责 转发数据和转发事件】</p></blockquote> <p>爷爷组件</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      我是爷爷组件
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title='我是爷爷组件的新数据'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击修改数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>father</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>father</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Father <span class="token keyword">from</span> <span class="token string">'./components/AppFather.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;我是爷爷组件的数据&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token comment">//根据自定义数据 获取孙子组件的传递数据</span>
      <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Father<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>父亲组件</p> <blockquote><p>父亲组件 通过$attrs 将获取到的上一层的数据 传递给 下一级</p> <p>父亲组件 通过 $listeners  将获取到的自定义事件 传递给上一级 触发</p></blockquote> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        父亲组件：
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grand-son</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grand-son</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> GrandSon <span class="token keyword">from</span> <span class="token string">'./GrandSon.vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
            GrandSon
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>孙子组件</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    我是孙子组件:
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>回传数据给祖宗<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
export default {
  props: {
      // 在爷爷组件中传递过来的属性
    title: { 
        type:String,
        default:'标题'
     },
  },
  methods:{
      changeData(){
          let data ={msg:&quot;我是孙子组件回传的数据&quot;}
          this.$emit('change',data)
      }
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_3-vuex-状态管理仓库"><a href="#_3-vuex-状态管理仓库" class="header-anchor">#</a> 3.Vuex 状态管理仓库</h2> <ul><li>安装vuex</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yarn add vuex@<span class="token number">3.6</span><span class="token number">.2</span>   
<span class="token comment">//或</span>
npm i vuex@<span class="token number">3.6</span><span class="token number">.2</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>创建vuex 的仓库文件  <code>src/store/index.js</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token comment">//注册插件 </span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//根据vuex的store 生成实例对象 </span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//存数据的仓库</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'comentang'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//修改仓库中数据的同步方法</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//调用 同步方法 实现异步修改仓库中的数据</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//暴露生成的vuex实例</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>main.js 进行导入和挂载</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router<span class="token punctuation">,</span>
  store<span class="token punctuation">,</span>  <span class="token comment">//将store 实例挂载到vue顶级实例对象上</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_4-获取-state-中的数据"><a href="#_4-获取-state-中的数据" class="header-anchor">#</a> 4 获取 state 中的数据</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
 	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;cometnag&quot;</span>     
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>直接通过实例对象层级查找</li></ul> <blockquote><p>缺点：每次改变都需要使用该语句进行重新获取，代码太冗长</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name     <span class="token comment">//comelong</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>通过 计算属性 获取值</li></ul> <blockquote><p>优点：如果仓库中的数据发生了变化，computed 会自动触发，重新更新值</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">nameData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>通过计算属性 +  对象解构获取</li></ul> <blockquote><p>将mapState 对象解构出来直接放到 computed中</p> <p>优点：使用简便，推荐此方法</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_5-mutations-修改数据的方法"><a href="#_5-mutations-修改数据的方法" class="header-anchor">#</a> 5.mutations 修改数据的方法</h2> <h3 id="_5-1-在组件中直接修改值"><a href="#_5-1-在组件中直接修改值" class="header-anchor">#</a> 5.1 在组件中直接修改值</h3> <blockquote><p>直接通过实例对象层级赋值</p> <p>缺点：任何组件任何时候都可以修改这个数据，给数据维护带来了不稳定性。</p> <p>vuex官网页非常明确的指出，修改vuex仓库中的数据必须使用 vuex中定义的方法。</p> <p>低版本的vuex 数据会修改成功 但是控制台会有报错提示。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'新数据'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5-2-定义mutations的方法-用来修改数据"><a href="#_5-2-定义mutations的方法-用来修改数据" class="header-anchor">#</a> 5.2 定义mutations的方法 用来修改数据</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//存数据的仓库</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'comentang'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//修改仓库中数据的同步方法</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>newData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>name <span class="token operator">=</span> newData
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>在组件中 调用该方法 实现修改数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeName'</span><span class="token punctuation">,</span>新数据<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>methods+解构的方式 【推荐】</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token comment">// 注意，mapMutations是解构到methods里面的，而不是计算属性了</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'changeName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token comment">//使用方法和methods中的函数 一致。    </span>
     <span class="token comment">// this.changeName(新数据) 修改数据 </span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_6-actions-异步修改数据"><a href="#_6-actions-异步修改数据" class="header-anchor">#</a> 6. actions 异步修改数据</h2> <blockquote><p>定义actions 异步操作中 通过上下文 调用同步方法 修改数据</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">//调用 同步方法 实现异步修改仓库中的数据</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token comment">//1s之后 通过上下文 调用同步方法修改数据</span>
        <span class="token function">setAsyncData</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>newData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeName'</span><span class="token punctuation">,</span>newData<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>在组件中 调用该方法 实现修改数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'setAsyncData'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>methods+解构的方式 【推荐】</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
     <span class="token comment">// 注意，mapActions是解构到methods里面的，而不是计算属性了</span>
        <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'setAsyncData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   	    <span class="token keyword">let</span> res<span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAsyncData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_7-修饰器-getters"><a href="#_7-修饰器-getters" class="header-anchor">#</a> 7.修饰器：Getters</h2> <blockquote><p>获取数据时 统一对该数据进行处理之后 再返回新数据</p> <p>特点：必须要有return 返回新数据   ，调用时不需要传参数</p></blockquote> <p>定义修饰器</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token function">updateName</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'你好呀'</span><span class="token operator">+</span>state<span class="token punctuation">.</span>name<span class="token punctuation">;</span>    
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>组件中直接使用 获取数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>updateName
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>通过computed 解构函数使用</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>mapGetters<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
 <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'updateName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//取值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>updateName1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>updateName
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_8-模块-module"><a href="#_8-模块-module" class="header-anchor">#</a> 8. 模块  Module</h2> <blockquote><p>假设一个项目功能比较复杂，在vuex中存储的数据非常多，设置出现了同名的情况，这种时候就不能直接写到一个store 文件中了，应该根据不同的功能模块 对 该store文件进行拆分。</p> <p>思路：写独立的js文件  将 5个核心配置写入一个对象 并 暴露出去，导入到总的store里面的modules里面</p></blockquote> <blockquote><p>现有模块： 用户模块users          商品模块 goods</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>src<span class="token operator">/</span>store<span class="token operator">/</span>index<span class="token punctuation">.</span>js  #总的vuex主模块
src<span class="token operator">/</span>store<span class="token operator">/</span>users<span class="token punctuation">.</span>js   #用户模块
src<span class="token operator">/</span>store<span class="token operator">/</span>goods<span class="token punctuation">.</span>js  #商品模块
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//index.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token comment">// 导入子模块  </span>
<span class="token keyword">import</span> users <span class="token keyword">from</span> <span class="token string">'./users'</span>
<span class="token keyword">import</span> goods <span class="token keyword">from</span> <span class="token string">'./goods'</span>


<span class="token comment">//注册插件 </span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//根据vue的store 生成实例对象 </span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'我是主模块的cometang'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//模块</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        users<span class="token punctuation">,</span> goods
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//暴露生成的vuex实例</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// goods</span>
<span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">goodsName</span><span class="token operator">:</span><span class="token string">'我是goods的name'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> goods
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//users</span>
<span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">userName</span><span class="token operator">:</span> <span class="token string">'我是userjs的name'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> users
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>注意：使用了模块化和命名空间之后对于子模块中的<code>数据，方法</code>的调用 不再建议使用 解构赋值快速复制的方式进行.</p> <p>原因：本来命名空间打开就是为了区分各个不同的模块，如果用解构的方式，可能会造成数据变量名 方法名重名使用的风险。</p> <ul><li>使用方式</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//获取数据</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>users<span class="token punctuation">.</span>userName<span class="token punctuation">;</span>
<span class="token comment">//获取Getters 修饰器的数据</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>users<span class="token punctuation">.</span>userName<span class="token punctuation">;</span>
<span class="token comment">//调用同步方法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'模块名/mutations的方法名'</span><span class="token punctuation">,</span>传递的数据<span class="token punctuation">)</span>
<span class="token comment">// 调用异步方法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'模块名/actions的方法名'</span><span class="token punctuation">,</span>传递的数据<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>解构使用</li></ul> <blockquote><p>特点：一个组件中 只能解构一个模块的数据 和方法</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span>mapMutations<span class="token punctuation">,</span>mapActions<span class="token punctuation">,</span>mapGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'userName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">//this.userName</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'newUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//this.newUserName</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'updateName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//this.updateName(数据)</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'asyncUpdateName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//this.asyncUpdateName(数据)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_9-vuex-数据持久化-插件"><a href="#_9-vuex-数据持久化-插件" class="header-anchor">#</a> 9.Vuex 数据持久化 插件</h2> <blockquote><p>系统中经常需要将很多数据 存储起来 以后仍然可以使用（关闭浏览器之后 重新打开仍然可用）</p> <p>思路一： 在所有的state 中 增加循环，把数据全部存储到本地存储localStorage之中。</p> <p>思路二：使用数据持久化的插件</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install vuex<span class="token operator">-</span>persistedstate   
或
yarn add vuex<span class="token operator">-</span>persistedstate 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//数据持久化插件导入</span>
<span class="token keyword">import</span> persistedState <span class="token keyword">from</span> <span class="token string">'vuex-persistedstate'</span>

<span class="token comment">//根据vue的store 生成实例对象 </span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//模块</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">persistedState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">//添加插件</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//暴露生成的vuex实例</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/mjlxiaoma/edit/master/docs/01.前端/02.vue/05.vuex状态管理.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/05/12, 08:12:03</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/boke/pages/e0fc4a/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">MVC与MVVM</div></a> <a href="/boke/pages/bfabcd/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">TypeScript基础</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/boke/pages/e0fc4a/" class="prev">MVC与MVVM</a></span> <span class="next"><a href="/boke/pages/bfabcd/">TypeScript基础</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/boke/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/boke/pages/4da6e0/"><div>
            输入url到页面展示发生了什么
            <!----></div></a> <span class="date">05-12</span></dt></dl><dl><dd>02</dd> <dt><a href="/boke/pages/b81ea5/"><div>
            模块化
            <!----></div></a> <span class="date">05-09</span></dt></dl><dl><dd>03</dd> <dt><a href="/boke/pages/d78877/"><div>
            前端页面渲染方式
            <!----></div></a> <span class="date">05-06</span></dt></dl> <dl><dd></dd> <dt><a href="/boke/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1403029829@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/mjlxiaoma" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2025
    <span>comelong | <a href="https://github.com/mjlxiaoma" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/boke/assets/js/app.070e90f1.js" defer></script><script src="/boke/assets/js/2.befd470a.js" defer></script><script src="/boke/assets/js/24.4112a5f9.js" defer></script>
  </body>
</html>
